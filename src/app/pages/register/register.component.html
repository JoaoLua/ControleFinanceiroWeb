<div class="login-container"> <mat-card class="login-card mat-elevation-z8">
    <mat-card-header>
      <mat-card-title>Crie sua conta</mat-card-title>
      <mat-card-subtitle>É rápido e fácil</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="login-form">
        
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>E-mail</mat-label>
          <input matInput type="email" formControlName="email">
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngIf="form.get('email')?.hasError('required')">Obrigatório</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Senha</mat-label>
          <input matInput [type]="hidePassword() ? 'password' : 'text'" formControlName="password">
          <mat-icon matPrefix>lock</mat-icon>
          <button mat-icon-button matSuffix (click)="togglePasswordVisibility($event)">
             <mat-icon>{{hidePassword() ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="form.get('password')?.hasError('minlength')">Mínimo 6 caracteres</mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid || isLoading()" class="submit-button">
           @if (isLoading()) { <mat-spinner diameter="24"></mat-spinner> } @else { Cadastrar }
        </button>

        <div class="footer-link">
          <span>Já tem uma conta?</span>
          <a routerLink="/login" mat-button color="accent">Entrar</a>
        </div>

      </form>
    </mat-card-content>
    <mat-progress-bar *ngIf="isLoading()" mode="indeterminate"></mat-progress-bar>
  </mat-card>
</div>